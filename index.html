<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>–ù–∞—à –º–∞–≥–∞–∑–∏–Ω</h1>
        
        <div class="products" id="products">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>

        <div class="cart" id="cart">
            <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
            <div class="cart-items" id="cartItems">
                <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <div id="total">–ò—Ç–æ–≥–æ: 0 ‚ÇΩ</div>
            <button onclick="showCheckoutForm()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ñ–æ—Ä–º–æ–π –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeCheckoutForm()">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
            <form id="checkoutForm" onsubmit="submitOrder(event)">
                <div class="form-group">
                    <label for="fullName">–ò–º—è –§–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="fullName" required>
                </div>
                <div class="form-group">
                    <label for="phone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
                    <input type="number" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
                    <input type="text" id="address" required>
                </div>
                <div class="form-group">
                    <label for="email">–ï–ª–µ–∫—Ç—Ä–æ–Ω–∞ –ø–æ—á—Ç–∞:</label>
                    <input type="text" id="email" required>
                </div>
                <div class="form-group">
                    <label>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:</label>
                    <div class="payment-methods">
                        <div class="payment-method">
                            <input type="radio" id="cash" name="paymentMethod" value="cash" required>
                            <label for="cash">–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</label>
                        </div>
                        <div class="payment-method">
                            <input type="radio" id="card" name="paymentMethod" value="card">
                            <label for="card">–ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</label>
                        </div>
                    </div>
                </div>
                <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </form>
        </div>
    </div>

    <script>
        // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–∞—Ö
        const products = [
            { 
                id: 1, 
                name: '–ú–µ–¥–æ–≤–∏–∫', 
                price: 800, 
                image: 'images/',
                description: '–í–∞–≥–∞:1.100 –ì—Ä–∞–º–º'
            },
            { 
                id: 2, 
                name: '–ù–∞–ø–æ–ª–µ–æ–Ω', 
                price: 1000, 
                image: 'images/–ù–∞–ø–æ–ª–µ–æ–Ω.jpg',
                description: '–í–∞–≥–∞:1.300 –ì—Ä–∞–º–º'
            },
            { 
                id: 3, 
                name: '–ú–∞—Ä–∞–∫—É—è', 
                price: 200, 
                image: 'images/–∫–æ—Ä–ø—É—Å–Ω–µ.—Ç—ñ—Å—Ç–µ—á–∫–æ.–º–∞—Ä–∞–∫—É—è.jpg',
                description: '–¶–µ–Ω–∞ –∑–∞ –æ–¥–Ω—É —à—Ç—É–∫—É'
            }
        ];

        // –ö–æ—Ä–∑–∏–Ω–∞ –≤ –≤–∏–¥–µ –æ–±—ä–µ–∫—Ç–∞
        let cart = {};

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
        function displayProducts() {
            const productsDiv = document.getElementById('products');
            productsDiv.innerHTML = products.map(product => `
                <div class="product">
                    <h3>${product.name}</h3>
                    <img src="${product.image}" alt="${product.name}">
                    <div class="description">${product.description}</div>
                    <div class="price">${product.price} –ì—Ä–Ω</div>
                    <button onclick="addToCart(${product.id})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            `).join('');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(productId) {
            if (cart[productId]) {
                cart[productId].quantity++;
            } else {
                const product = products.find(p => p.id === productId);
                cart[productId] = {
                    ...product,
                    quantity: 1
                };
            }
            updateCart();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeFromCart(productId) {
            delete cart[productId];
            updateCart();
        }

        // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
        function incrementQuantity(productId) {
            if (cart[productId]) {
                cart[productId].quantity++;
                updateCart();
            }
        }

        // –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞
        function decrementQuantity(productId) {
            if (cart[productId]) {
                if (cart[productId].quantity > 1) {
                    cart[productId].quantity--;
                } else {
                    delete cart[productId];
                }
                updateCart();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const total = document.getElementById('total');
            
            cartItems.innerHTML = Object.values(cart).map(item => `
                <div class="cart-item">
                    <div>${item.name} - ${item.price} –ì—Ä–Ω</div>
                    <div class="quantity-controls">
                        <button onclick="decrementQuantity(${item.id})">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="incrementQuantity(${item.id})">+</button>
                        <button class="remove-button" onclick="removeFromCart(${item.id})">√ó</button>
                    </div>
                </div>
            `).join('');
            
            const totalSum = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
            total.textContent = `–ò—Ç–æ–≥–æ: ${totalSum} –ì—Ä–Ω`;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        function showCheckoutForm() {
            if (Object.keys(cart).length === 0) {
                alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                return;
            }
            document.getElementById('checkoutModal').style.display = 'block';
        }

        // –ó–∞–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
        function closeCheckoutForm() {
            document.getElementById('checkoutModal').style.display = 'none';
        }

        // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function submitOrder(event) {
            event.preventDefault();

            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const email = document.getElementById('email').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const paymentText = paymentMethod === 'cash' ? '–ù–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏' : '–ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏';

            const order = {
                customerInfo: {
                    fullName,
                    phone,
                    address,
                    email,
                    paymentMethod: paymentText
                },
                items: Object.values(cart).map(item => `${item.name} (${item.quantity} —à—Ç.)`),
                total: Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0),
                datetime: new Date().toLocaleString()
            };

            const TELEGRAM_BOT_URL = 'https://api.telegram.org/bot7793475696:AAHc4uz8vOC0MVlVpD-5ktoXLYdunfK7Lzo/sendMessage';
            const TELEGRAM_CHAT_ID = '5160015392';

            const message = `
                üõçÔ∏è –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!
                
                üë§ –ü–æ–∫—É–ø–∞—Ç–µ–ª—å:
                –ò–º—è: ${order.customerInfo.fullName}
                –¢–µ–ª–µ—Ñ–æ–Ω: ${order.customerInfo.phone}
                –ê–¥—Ä–µ—Å: ${order.customerInfo.address}
                –ï–ª–µ–∫—Ç—Ä–æ–Ω–∞—è –ø–æ—á—Ç–∞: ${order.customerInfo.email}
                
                üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: ${order.customerInfo.paymentMethod}
                
                üì¶ –¢–æ–≤–∞—Ä—ã:
                ${order.items.join('\n')}
                
                üí∞ –°—É–º–º–∞: ${order.total} –ì—Ä–Ω
                üïí –í—Ä–µ–º—è: ${order.datetime}
            `;

            fetch(TELEGRAM_BOT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message
                })
            })
            .then(response => response.json())
            .then(data => {
                alert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!');
                cart = {};
                updateCart();
                closeCheckoutForm();
                document.getElementById('checkoutForm').reset();
            })
            .catch(error => {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞');
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        displayProducts();
    </script>
</body>
</html>